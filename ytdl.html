<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="res/css/shared.css">
	<link rel="stylesheet" href="res/css/table.css">
	<link rel="stylesheet" href="res/css/details-triangle.css">
	<link rel="stylesheet" href="res/css/ytdl.css">
</head>

<body class="tt-vert">
	<h1 id="title"><a class="tt-home" href="/">trustytrojan.dev</a>/ytdl</h1>

	<input type="text" id="yt-id-or-url" class="tt-clickable" placeholder="youtube video id/link"
		onkeypress="if (event.key === 'Enter') getInfo()">

	<div id="everything-else" class="tt-vert">
		<a id="details-root" class="tt-clickable" target="_blank">
			<img id="details-thumbnail">
			<div id="details-text">
				<b id="details-title"></b>
				<div id="details-channel"></div>
				<div id="details-views-length"></div>
			</div>
		</a>

		<a id="dl-button" class="tt-clickable">download!</a>

		<div id="help-text" class="tt-subtle-border" style="text-align:center">
			use download link above for the highest quality video!<br>
			or mix and match audio/video qualities in the tables below.<br>
		</div>

		<details class="tt-subtle-border" style="text-align:center">
			<summary>
				<div class="tt-subtle" style="display:inline;font-size:13pt">customize</div>
			</summary>

			<div id="help-text" class="tt-subtle-border" style="text-align:center">
				left-click formats to select for download.<br>
				right-click to copy links to streams from youtube.
			</div>

			<div class="tt-horiz" style="align-items: flex-start">
				<div id="copied-popup" hidden>copied link!</div>

				<div class="tt-vert">
					<h2 class="tt-subtle">video</h2>
					<div class="tt-border table-wrapper">
						<table>
							<thead>
								<tr>
									<th>itag</th>
									<th>quality</th>
									<th>codec</th>
									<th>bitrate</th>
								</tr>
							</thead>
							<tbody id="video-tb"></tbody>
						</table>
					</div>
				</div>

				<div class="tt-vert">
					<h2 class="tt-subtle">audio</h2>
					<div class="tt-border table-wrapper">
						<table>
							<thead>
								<tr>
									<th>itag</th>
									<th>quality</th>
									<th>codec</th>
									<th>bitrate</th>
								</tr>
							</thead>
							<tbody id="audio-tb"></tbody>
						</table>
					</div>

					<h2 class="tt-subtle">both</h2>
					<div class="tt-border table-wrapper">
						<table>
							<thead>
								<tr>
									<th>itag</th>
									<th>quality</th>
									<th>codecs</th>
									<th>bitrate</th>
								</tr>
							</thead>
							<tbody id="av-tb"></tbody>
						</table>
					</div>
				</div>
			</div>
		</details>
	</div>

	<script type="module">
		import { getInfo } from './res/js/ytdl/ytdl.js';
		import { ytIdOrUrl } from './res/js/ytdl/elements.js';
		window.getInfo = getInfo;

		const params = new URLSearchParams(window.location.search);
		const v = params.get('v');
		if (v) {
			ytIdOrUrl.value = v;
			getInfo();
		}
	</script>
</body>

</html>